___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Gorgias Chat",
  "categories": ["CHAT", "SALES"],
  "brand": {
    "id": "gorgias",
    "displayName": "Gorgias",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Customer service made easy",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "gorgiasChatAppID",
    "displayName": "Gorgias Chat App ID",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const injectScript = require('injectScript');

const chatBundleLoaderUrl = 'https://config.gorgias.chat/gorgias-chat-bundle-loader.js?applicationId=' + data.gorgiasChatAppID;

const onSuccess = () => {
  log('Gorgias chat : Successfully loaded');
  data.gtmOnSuccess();
};

const onFailure = () => {
  log('Gorgias chat : An error occured during loading');
  data.gtmOnSuccess();
};
 
log('Gorgias chat : Initializing...');
injectScript(chatBundleLoaderUrl, onSuccess, onFailure, chatBundleLoaderUrl);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://config.gorgias.chat/gorgias-chat-bundle-loader.js?applicationId\u003d*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 05/10/2021, 17:07:56


